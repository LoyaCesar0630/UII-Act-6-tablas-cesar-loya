{% extends 'base.html' %}

{% block content %}
<div class="card">
    <h2>Gestión de Pedidos</h2>
    
    <div style="margin-bottom: 2rem;">
        <a href="{% url 'crear_pedido_multiple' %}" class="btn btn-primary">Crear Nuevo Pedido</a>
        <a href="{% url 'catalogo_productos' %}" class="btn" style="background: #00cec9; color: white;">Ir al Catálogo</a>
    </div>
    
    <table class="table">
        <thead>
            <tr>
                <th>ID Pedido</th>
                <th>Cliente</th>
                <th>Fecha</th>
                <th>Estado</th>
                <th>Total</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for pedido in pedidos %}
            <tr>
                <td>#{{ pedido.id_pedido }}</td>
                <td>{{ pedido.id_usuario.nombre }}</td>
                <td>{{ pedido.fecha|date:"d/m/Y H:i" }}</td>
                <td>
                    <span style="padding: 0.25rem 0.5rem; border-radius: 15px; font-size: 0.8rem; 
                        {% if pedido.estado_pedido == 'entregado' %}background: #55efc4; color: #000;
                        {% elif pedido.estado_pedido == 'enviado' %}background: #74b9ff; color: #fff;
                        {% elif pedido.estado_pedido == 'confirmado' %}background: #fdcb6e; color: #000;
                        {% elif pedido.estado_pedido == 'cancelado' %}background: #ff7675; color: #fff;
                        {% else %}background: #dfe6e9; color: #000;{% endif %}">
                        {{ pedido.get_estado_pedido_display }}
                    </span>
                </td>
                <td>${{ pedido.total_pedido }}</td>
                <td>
                    <div style="display: flex; gap: 0.5rem;">
                        <a href="{% url 'detalle_pedido' pedido.id_pedido %}" class="btn" style="background: #3498db; color: white; padding: 0.3rem 0.8rem; font-size: 0.8rem;">Ver</a>
                        <a href="{% url 'actualizar_estado_pedido' pedido.id_pedido %}" class="btn" style="background: #f39c12; color: white; padding: 0.3rem 0.8rem; font-size: 0.8rem;">Estado</a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align: center; padding: 2rem;">
                    <h3>No hay pedidos registrados</h3>
                    <p>Comienza creando tu primer pedido desde el catálogo.</p>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}